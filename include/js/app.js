function newLocation(a){window.location=a;return false}function goHome(a){if(typeof(a)=="undefined"){a=""}window.location=appHomeUrl+a;return false}function changeMenuHeight(){menudiv=document.getElementById("menu");menudiv.style.height=window.innerHeight-145}function init_tinymce(d,c){if(typeof(tinyMCE)!=="undefined"){var a="";if(d===true){a=",asciisvg"}if(!isBoolean(c)){c=true}var b={mode:"textareas",theme:"advanced",theme_advanced_buttons1:"fontselect,fontsizeselect,bold,italic,underline,strikethrough,separator,sub,sup,separator,cut,copy,paste,undo,redo,pastetext,pasteword,selectall",theme_advanced_buttons2:"numlist,bullist,outdent,indent,separator,forecolor,backcolor,separator,hr,link,unlink,image,table,code,separator,asciimath,asciimathcharmap"+a,theme_advanced_buttons3:"",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",plugins:"paste,asciimath,asciisvg,table,inlinepopups",force_br_newlines:true,force_p_newlines:false,forced_root_block:"",theme_advanced_fonts:"Arial=arial,helvetica,sans-serif,Courier New=courier new,courier,monospace,Georgia=georgia,times new roman,times,serif,Tahoma=tahoma,arial,helvetica,sans-serif,Times=times new roman,times,serif,Verdana - Default=verdana,arial,helvetica,sans-serif",font_size_style_values:"8,9,10,11,12,14,16,24,36",theme_advanced_font_sizes:"8px,9px,10px,11px,12px,14px,16px,24px,36px",theme_advanced_runtime_fontsize:true,paste_create_paragraphs:false,paste_create_linebreaks:true,paste_use_dialog:true,paste_auto_cleanup_on_paste:true,paste_convert_middot_lists:true,paste_retain_style_properties:"all",paste_convert_headers_to_strong:true,handle_event_callback:"cms_tinymce_event",AScgiloc:AScgiloc,ASdloc:appHomeUrl+"include/js/tiny_mce/plugins/asciisvg/js/d.svg",content_css:appIncludePath+"css/style_tinymce.css",gecko_spellcheck:true,theme_advanced_resizing:true,theme_advanced_resizing_use_cookie:false};if(c){b.paste_text_sticky=true;b.setup=function(e){e.onInit.add(function(f){f.pasteAsPlainText=true})}}tinyMCE.init(b)}}var pdfWaitHtml=false;function LoadPdfPage(b,a,d){var c=document.getElementById(d);if(isObject(c)){if(isString(pdfWaitHtml)){c.innerHTML=pdfWaitHtml}ajaxGetpage(d,b+a,true)}return false}var cms_session_class=function(){if(typeof(cms_session_class.singleton)!=="undefined"){return cms_session_class.singleton}cms_session_class.singleton=this;var that=this;var url_update=appHomeUrl+"session_update";var url_check=appHomeUrl+"session_update/check";var config={GLOBAL_UPDATE_METHOD:"cms_session_class.singleton.update",URL_UPDATE:url_update,URL_CHECK:url_check,JS_CODE_SESSION_UPDATE:"ajaxPostform('','"+url_update+"','',true,false)",JS_CODE_SESSION_CHECK:"ajaxPostform('','"+url_check+"','',true,false,false,false,['X-Cms-Skip-Session-Update','1'])",UPDATE_RETRY_TIME:60*1000,system_session_timer:5*60*1000,system_immediate_update_time:15*60*1000,timer_handle:null,update_retry_timer_handle:null,ready_state:false,user_ajax_inactive_time:0,needs_checking:true};var private_obj=new function(){var that=this;this.reset=function(){config.user_ajax_inactive_time=0;config.needs_checking=false};this.is_valid_timer=function(){return(config.timer_handle!==null&&!isNaN(config.timer_handle))};this.clear_timer=function(){if(that.is_valid_timer()){clearInterval(config.timer_handle)}config.timer_handle=null};this.start_timer=function(wait_time){if(that.is_valid_timer()){return}if(!isInteger(wait_time)){wait_time=config.system_session_timer}this.count=0;while(!that.is_valid_timer()&&this.count++<10){config.timer_handle=setInterval(config.GLOBAL_UPDATE_METHOD+"("+wait_time+")",wait_time)}if(this.count>=10){alert(gGeneralJavasriptError)}};this.check_session=function(){if(config.needs_checking){eval(config.JS_CODE_SESSION_CHECK)}else{config.needs_checking=true}}};this.request_result=function(url,request_object){if(!isString(url)||!isObject(request_object)||typeof(request_object.responseText)==="undefined"||config.ready_state!==true||url.indexOf(appHomeUrl)<0){return}if(url!==config.URL_CHECK&&url!==config.URL_UPDATE){private_obj.reset();return}if(url==config.URL_UPDATE){config.update_retry_timer_handle=null}if(request_object.responseText===ajaxSuccess){if(url!=config.URL_CHECK){private_obj.reset()}}else{if(request_object.responseText===ajaxFailed){private_obj.clear_timer();window.location=appHomeUrl+"login/logout"}else{if(url==config.URL_UPDATE){that.update_session()}}}};this.update_session=function(update_now){if(config.ready_state!==true){return}if(update_now===true){eval(config.JS_CODE_SESSION_UPDATE)}else{if(config.update_retry_timer_handle===null){config.update_retry_timer_handle=setTimeout(config.JS_CODE_SESSION_UPDATE,config.UPDATE_RETRY_TIME)}}};this.browser_event=function(){if(config.user_ajax_inactive_time>config.system_immediate_update_time){if(config.ready_state!==true){return}that.update_session(true)}};this.update=function(timer_value,init_params){if(!isInteger(timer_value)||timer_value<1000){timer_value=config.system_session_timer}if(init_params===true){if(typeof(ajaxFailed)==="undefined"||typeof(ajaxSuccess)==="undefined"||typeof(appHomeUrl)==="undefined"){var msg;if(typeof(gGeneralJavasriptError)==="undefined"){msg=gGeneralJavasriptError}else{msg="Javascript error in function cms_session_class.update."}alert(msg);return}document.onmouseup=this.browser_event;document.onkeyup=this.browser_event;config.system_session_timer=timer_value;config.system_immediate_update_time=timer_value*3;config.ready_state=true;private_obj.start_timer(config.system_session_timer);return}if(config.ready_state!==true){return}config.user_ajax_inactive_time+=timer_value;private_obj.check_session()}};function cms_tinymce_event(a){if(a.type==="keyup"||a.type==="mouseup"){if(typeof(parent.cms_session_class.singleton)!=="undefined"){parent.cms_session_class.singleton.browser_event()}}}var basic_session_check=function(c,a){if(typeof(basic_session_check.singleton)!=="undefined"){return basic_session_check.singleton}basic_session_check.singleton=this;var b=this;this.wrapper=c;this.ready=false;this.controller_function=a;if(!isString(this.controller_function)){this.controller_function="check"}this.callback=function(d,e){if(!isString(d)||!isObject(e)||typeof(e.responseText)==="undefined"){return}if(e.responseText==ajaxFailed){window.location=surveyHomeUrl}};this.check=function(){ajaxPostform("",appHomeUrl+"session_update/"+b.controller_function,"",true,false,b.wrapper,["X-Cms-Skip-Session-Update","1"])};this.process=function(d,e){if(b.ready!==true){return}if(isString(d)&&isObject(e)){this.callback(d,e)}else{this.check()}};if(b.ready===false){b.ready=true;setInterval(this.wrapper+"()",5*60*1000)}};function basic_session_check_wrapper(a,b){if(typeof(this.myobj)==="undefined"){this.myobj=new basic_session_check("basic_session_check_wrapper",a);return}this.myobj.process(a,b)}function noEnterKey(b){var a=0;if(typeof(window.event)!=="undefined"){a=window.event.keyCode}else{if(typeof(b)!=="undefined"){a=b.which}}if(a==13){return false}}function openBrowserWindow(b,c,j,a,g,h){if(!isString(b)){return false}if(!isInteger(c)){c=1000}if(!isInteger(j)){j=750}if(!isString(a)){a="pdf"+new Date().getTime()}var i=(screen.height-j)/2-60;if(i<0){i=0}var e=(screen.width-c)/2;if(e<0){e=0}var f="status=no,toolbar=no,location=no,resizable=yes";if(g===true){f=f+",scrollbars=yes"}if(h===true){f=f+",menubar=yes"}else{f=f+",menubar=no"}f=f+",top="+i+",left="+e+",width="+c+",height="+j;var d=window.open(b,a,f);d.focus();return false}function init_jstree(c,a,b){$(function(){$("#"+c).jstree({core:{initially_open:["root"]},html_data:{data:a,ajax:{url:function(e){var d=$(e).children("a").attr("name");return d}}},themes:{theme:"classic",url:appIncludePath+"js/jstree/themes/classic/style.css"},types:{types:{file:{icon:{image:app_image_folder+"page.gif"}},editicon_type:{icon:{image:app_image_folder+"edit.gif"}},copyicon_type:{icon:{image:app_image_folder+"copy.gif"}},mytree_icon_type:{icon:{image:app_image_folder+"mycourse.gif"}}}},plugins:["themes","html_data","cookies","types","ui"]});$("#"+c+" a").live("click",function(d){$("#"+c).jstree("toggle_node",this);$(b).jstree("deselect_all");return false})})}function toggleTreePanel(a){if(typeof(this.panel_idname)=="undefined"){this.panel_idname="#left_panel";this.hide_button="#hide_panel_button";this.show_button="#show_panel_button"}if(a===true){hideObj(this.show_button);showObj(this.hide_button);showObj(this.panel_idname)}else{ShowOrHideobj(this.hide_button);ShowOrHideobj(this.show_button);ShowOrHideobj(this.panel_idname)}return false}function site_director(c,d,b,a){if(!isString(c)){goHome("home");return false}if(!isString(d)){d="menu"}if(typeof(b)=="undefined"||b===true){b="home/logo"}c=appHomeUrl+c;ajaxGetpage(d,c,true);if(isString(b)){ajaxGetpage("page_content",appHomeUrl+b,true)}if(typeof(a)==="undefined"||a===true){toggleTreePanel(true)}else{toggleTreePanel(false)}return false}function doMenuTree(){var a=document.getElementById("switch_tree_button");if(showDept==true){showDept=false;shrinkMenuDiv("dept_tree");expandMenuDiv("grade_tree");if(isObject(a)){a.value=deptButton}}else{showDept=true;shrinkMenuDiv("grade_tree");expandMenuDiv("dept_tree");if(isObject(a)){a.value=gradeButton}}return false}function submit_resource_iframe(c,e,a,h,d){if(!isString(c)||!isString(e)){return false}var f=document.getElementById("text1");if(isObject(f)&&typeof(tinyMCE)!=="undefined"){var g=tinyMCE.get("text1").getContent();g=g.replace('<span style="font-family: verdana,arial,helvetica,sans-serif;"><span style="font-size: 11px;">&nbsp;</span></span>',"");g=g.replace('<span style="font-family: verdana,arial,helvetica,sans-serif;"></span>',"");f.value=g}if(!isString(d)){d="resource"}var b=ajaxPostform("",c,e,false);if(b!=false||typeof b=="string"){if(isString(h)&&isString(a)){parent.ajaxGetpage(h,a)}parent.closeDhtmlWindow(d)}return false}function shrinkDiv(a,b){var c=document.getElementById(a);hideDiv(a);if(isObject(c)&&typeof(c.style)!=="undefined"){c.style.height="1px";c.style.width="1px";c.style.overflow="hidden";if(typeof(b)!="undefined"&&typeof(c.style.margin)!="undefined"){c.style.margin=b}}}function expandDiv(a,b){var c=document.getElementById(a);if(isObject(c)&&typeof(c.style)!=="undefined"){c.style.height="auto";c.style.width="auto";c.style.overflow="auto";if(typeof(b)!="undefined"&&typeof(c.style.margin)!="undefined"){c.style.margin=b}}showDiv(a)}function allowOneCheckBox(c,g){var a=c.form;var b,e,f;if(typeof(g)=="undefined"){g="gradeid_"}var h=new RegExp(g,"gi");for(var d=0;d<a.elements.length;d++){b=a.elements[d].name;if(typeof(b)=="undefined"||b==""){b=a.elements[d].id}if(typeof(b)=="undefined"||b==""){continue}e=a.elements[d].tagName.toLowerCase();if(e=="input"&&a.elements[d].type=="checkbox"&&a.elements[d]!=c){f=b.match(h);if(f==g){a.elements[d].checked=false}}}return true}function downloadWindow(a){var b=document.getElementById("hiddeniframesystemdownload");if(!isObject(b)){b=document.createElement("iframe");b.setAttribute("id","hiddeniframesystemdownload");document.body.appendChild(b);hideObj("#hiddeniframesystemdownload")}if(isObject(b)){b.src=a}else{mywindow=window.open(a,"download","width=1,height=1");mywindow.blur();mywindow.moveTo(600,500)}return false}function cancelInput(c,b){var a=confirm(cancelInputMessage);if(a){ajaxGetpage(c,b,true)}return false}function cancelIframe(b){var a=confirm(parent.cancelInputMessage);if(a){parent.closeDhtmlWindow(b)}return false}function reset_page(c,b){var a=confirm(parent.cancelInputMessage);if(a){refresh_page(c,b)}return false}function updateDivConfirm(d,b,c){var a=confirm(c);if(a){ajaxGetpage(d,b,false)}return a}function cancelDhtml(b){var a=confirm(parent.cancelInputMessage);if(a){closeDhtmlWindow(b)}return false}function submitDhtml(b,e,d,f,c){var a=ajaxPostform("",b,e,false);if(a===true||a===""||a===ajaxSuccess){if(isString(d)&&isString(f)){updateContainer(f,d)}if(typeof c=="undefined"){c="select"}closeDhtmlWindow(c)}return false}function updateTarget(a,c,d,b){if(ajaxPostform(d,a,c,false)){closeDhtmlWindow(b)}return false}function delTarget(a,c,b){if(confirm(b)){ajaxGetpage(c,a,false)}return false}function writeSpan(a,c){var b=document.getElementById(a);if(b!="undefined"){b.innerHTML=c}}function print_flashchart(d,g,e,a,c){var b=c+"/"+new Date().getTime();var f=encodeURIComponent(b);swfobject.embedSWF(d,g,e,a,"9.0.0","expressInstall.swf",{"data-file":f})}function flashchart_window(c,j,d,l,i,g,b){if(!isArray(b)){return false}ajaxClipboard(true);var e=ajaxPostform("",c,g,false);if(e!=false){var f=true;var h=ajaxClipboard(true);if(isArray(h)&&h.length>0){f=h[0];if(h.length>2){d=h[1];l=h[2]}if(f&&h.length>4){b[2]=h[3];b[3]=h[4];var k=l-b[3];var a=110;if(typeof screen!="undefined"&&typeof screen.availHeight!="undefined"&&screen.availHeight>300){if(screen.availHeight-a-k<b[3]){b[3]=screen.availHeight-a-k;l=screen.availHeight}}}}create_dhtmlxwindow.alter_width_flag=false;newDhtmlWindow_text(j,d,l,i,e);if(f){print_flashchart(b[0],b[1],b[2],b[3],b[4])}}return false}function prepareDhxwinFlipDisplay(b,a){if(isDhtmlxObject(b)){b.cms_parent_dhxwinid=a;b.attachEvent("onClose","unhideParentDhxwin");b.attachEvent("onParkUp","unhideParentDhxwin");b.attachEvent("onParkDown","hideParentDhxwin");b.attachEvent("onShow","hideParentDhxwin");b.attachEvent("onHide","unhideParentDhxwin")}}function hideParentDhxwin(a){if(isDhtmlxObject(a)&&typeof a.cms_parent_dhxwinid!="undefined"){hideDhtmlWindow(a.cms_parent_dhxwinid)}return true}function unhideParentDhxwin(a){if(isDhtmlxObject(a)&&typeof a.cms_parent_dhxwinid!="undefined"){showDhtmlWindow(a.cms_parent_dhxwinid)}return true}function ajaxPostWindow(b,e,c,a,g,d){var f=ajaxPostform("",b,d,false);if(isString(f)){newDhtmlWindow_text(e,c,a,g,f)}return false}function remove_flag(a,b){if(a!=undefined){removeflag=document.getElementById(b);if(removeflag!=undefined){if(removeflag.value==""){removeflag.value=0}if(a.checked==1){removeflag.value=parseInt(removeflag.value)+1}else{removeflag.value=parseInt(removeflag.value)-1}}}}function updateWindow(a,c,e,g,b){if(typeof b=="undefined"||b==""||b==false){var d=getDhtmlWindowById(g);if(d!=null){var f=ajaxPostform("",a,c,false);winobjAttachHtml(d,f)}}else{var d=document.getElementById(b);if(d!=undefined){ajaxPostform(b,a,c,true)}}return false}function updateContainer(a,b,c){if(!isString(a)||!isString(b)){alert("updateContainer(): "+gGeneralJavasriptError);return false}if(!isString(c)){c=""}var d=getDhtmlWindowById(a);if(isDhtmlxObject(d)){var e=ajaxPostform("",b,c,false);if(isString(e)){winobjAttachHtml(d,e)}return false}d=document.getElementById(a);if(isObject(d)){ajaxPostform(a,b,c,true);return false}alert("updateContainer(): "+gGeneralJavasriptError);return false}function ShowOrHideobj(a){$(a).toggle()}function showObj(a){$(a).show()}function hideObj(a){$(a).hide()}function disable_button(a){var b=document.getElementById(a);if(isObject(b)&&(b.className=="btn"||b.className=="btnhov")){if(typeof b.disabled!="undefined"){b.disabled=true}if(typeof b.className!="undefined"){b.className="dis"}}}function enable_button(a){var b=document.getElementById(a);if(isObject(b)&&(b.className=="btn"||b.className=="btnhov"||b.className=="dis")){if(typeof b.disabled!="undefined"){b.disabled=false}if(typeof b.style.cssText!="undefined"){b.style.cssText=""}if(typeof b.className!="undefined"){b.className="btn"}}}function ajaxPostFade(c,g,e,f,b,a,d){if(d===true&&!confirm(cancelInputMessage)){return}if(a==undefined){a=true}if(!isString(f)){f="page_content"}if(ajaxPostform(f,c,e,false)){fadeObject(g,b);if(a===true){refresh_menutree()}}}function fadeObject(d,a){var b=document.getElementById(d);if(!isObject(b)){return false}if(!isInteger(a)){a=5}var c=function(){$(b).slideUp("slow")};setTimeout(c,a*1000)}function checked_all_radios(f){var b=document.forms[f];var d=new Array(0);var e;for(var c=0;c<b.elements.length;c++){elementname=b.elements[c].name;if(typeof(elementname)=="undefined"||elementname==""){elementname=b.elements[c].id}if(typeof(elementname)=="undefined"||elementname==""){continue}e=b.elements[c].tagName.toLowerCase();if(e=="input"&&b.elements[c].type=="radio"){if(d[elementname]===undefined){d[elementname]=b.elements[c].checked}else{if(b.elements[c].checked){d[elementname]=true}}}}var a=true;for(var c in d){if(!d[c]){a=false;break}}return a}function update_refresh(a,d,c){if(isString(a)&&isString(d)&&isString(c)){var b=ajaxGetpage(false,a,false);if(b===ajaxSuccess||b===true||b===""){ajaxGetpage(d,c)}}return false}function scroll_popup(b){if(!isString(b)){return true}var d=document.getElementById(b);if(isObject(d)&&typeof(d.scrollIntoView)!=="undefined"){var e,a,c;if(!window.pageYOffset){if(!(document.documentElement.scrollTop==0)){e=document.documentElement.scrollTop}else{e=document.body.scrollTop}}else{e=window.pageYOffset}d.scrollIntoView();if(!window.pageYOffset){if(!(document.documentElement.scrollTop==0)){a=document.documentElement.scrollLeft}else{a=document.body.scrollLeft}}else{a=window.pageXOffset}window.scrollTo(a,e);return false}return true}function pagescroll(b,a){ajaxGetpage(b,a);window.scrollTo(0,0)}function LoadUnitEditPage(b,d,c){var a=ajaxGetpage(d,b,false);if(a){refresh_menutree()}return false}function updateUnit(c,a,b){if(ajaxPostform("page_content",a,c,false)){refresh_menutree();return true}return false}function undoUnitEdit(a,b,c){if(confirm(c)){if(ajaxPostform("page_content",a,"",false)){refresh_menutree();window.scrollTo(0,0)}}}function confirmUnit(a,b,c){if(confirm(c)){if(ajaxPostform("page_content",a,"",false)){refresh_menutree();window.scrollTo(0,0)}}}function removeUnit(a,b,c){if(confirm(c)){if(ajaxPostform("page_content",a,"",false)){refresh_menutree()}}}function refresh_menutree(){var a=gMenutreenames;if(typeof a!="undefined"){$(a).jstree("refresh")}totalunit_refresh();return false}function shrinkMenuDiv(a){hideObj("#"+a)}function expandMenuDiv(a){showObj("#"+a)}function setNewCourseOwner(a){index=document.editorsel_form.editor_sel.selectedIndex;if(index>=0){name=document.editorsel_form.editor_sel.options[index].text;id=document.editorsel_form.editor_sel.options[index].value;document.getElementById("editornames").innerHTML=name;document.editcouresdes_form.editorid.value=id;closeDhtmlWindow("changeteacher_div")}else{printErrorWindow("Please select a user.")}return false}function setNewUnitOwner(a,d,b,f,e){ask_id=0;removeflag=document.getElementById(e);if(removeflag!=undefined){ask_id=parseInt(removeflag.value)}if(ask_id>0){var c=confirm(f);if(c){ajaxPostform("page_content",a,d,true);closeDhtmlWindow(b)}}else{ajaxPostform("page_content",a,d,true);closeDhtmlWindow(b)}return false}function setEditUnitOwner(j,c,d,f,e,b,g){var a=ajaxPostform("",j,e,false);var i=a.split("|");if(i!=undefined){var h=i[0];if(h==1){var k=confirm(b);if(k){ajaxPostform("",c,e,false);ajaxPostform("",d,e,false);ajaxPostform("page_content",f,e,false)}}else{ajaxPostform("",c,e,false);ajaxPostform("page_content",f,e,false)}refresh_menutree();closeDhtmlWindow(g)}return false}function show_select(h,c,j){var d="";var m="";var e="";if(h!=undefined){var l=40;var f="black";for(var g=0;g<h.length;g++){if(h[g].selected){var a=h[g].text;var b=h[g].value;d+=b+" ";m+=a+"|";e+='<font color="'+f+'">'+a+"</font>,";if(f=="black"){f="black"}else{f="black"}if(m.length>=l){e+="<br />";l+=60}}}}var k=e.lastIndexOf(",");e=e.substring(0,k);document.getElementById(c).value=d;document.getElementById(j).innerHTML=e;return false}function nosession_handle(b,a){var d=b.getNode(a.NodeId);var c=d.getChildIds();if(c.length>0){childid=c[0];if(childid=="nosession"){b.removeNode(childid);if(typeof sessionErrorMsg!="undefined"&&sessionErrorMsg!=""){errormsg=sessionErrorMsg}else{errormsg="Your session has timedout, you wil be redirected in 10 seconds"}printErrorWindow(errormsg,350,250,true);return true}}return true}function delUnitItemNorefresh(c,d,a){var b=confirm(d);if(b){ajaxGetpage("",c,false)}parent.closeDhtmlWindow(a);return false}function delUnitItem(c,a,e,d){var b=confirm(d);if(b){ajaxGetpage("",c,false);ajaxGetpage(e,a)}return false}function unitcalendar(d,k,e,i,g,b,f){var c=30;var a=110;var h=45;var j=ajaxGetpage("",f,false);if(!isNaN(j)&&j>=0&&j<100){b[3]=55+(j*c);var l=b[3]+h;if(typeof screen!="undefined"&&typeof screen.availHeight!="undefined"&&screen.availHeight>300){if(screen.availHeight-a-h<b[3]){b[3]=screen.availHeight-a-h;l=screen.availHeight}}if(j==0){e=600}flashchart_window(d,k,e,l,i,g,b)}return false}function showChartUnitlist(c,g,d,a,h,f){var b=(typeof f!="undefined"&&f!=""&&f!=false);if(b){hideDhtmlWindow(f)}var e=newDhtmlWindow(c,g,d,a,h);if(b){prepareDhxwinFlipDisplay(e,f)}}function ajax_select(e,b,c,d){var a="";if(e!=undefined){if(e=="1"){a=e}else{index=e.selectedIndex;a=e.options[index].value}}if(a!=""&&c!=""){document.getElementById(c).innerHTML='<img src="'+app_image_folder+'ajax_arrow.gif" />';ajaxPostform(c,b+a,d,true)}return false}function sortUnitItem(b,a,c){if(a!=undefined&&a!=""){ajaxGetpage("",b,false);ajaxGetpage(c,a,true)}else{ajaxGetpage(c,b,false)}return false}function select_listitem(d,a,c,e,b){if(b==""){b="0"}if(d.name=="filters"){updateContainer(e,a+d.value+"/"+b+"/"+e,c)}else{updateContainer(e,a,c)}return false}function refresh_page(b,a){formname="resource_form";var c=ajaxPostform("",a,formname,false);document.getElementById("dhtmlwin_resource").innerHTML=c;return false}function showHidePasswordFields(a,b){if(typeof(a.value)!=undefined&&isString(b)){if(a.value==1){showObj("#"+b)}else{hideObj("#"+b)}}}function refresh_select(c,a,b){if(b!=""||b!=undefined){b="/"+b}else{b=""}ajaxGetpage("page_content",a+"/"+c.value+b,false);return false}function submitUser(a,g,j,i,h){var e=document.getElementById("password");var c=document.getElementById("showpass");var k=document.getElementById("confirmpassword");var b=document.getElementById("confirmpassword1");var f=document.getElementById("oldpassword");var d=document.getElementById("oldpassword1");if(isObject(f)&&isObject(d)&&isString(d.value)){f.value=des_encrypt(d.value)}e.value=des_encrypt(c.value);k.value=des_encrypt(b.value);submitDhtml(a,g,j,i,h);return false}function refresh_unitcopy(a,b){formname="resource_form";var c=ajaxPostform("",a,formname,false);document.getElementById("dhtmlwin_resource").innerHTML=c;refresh_menutree();return false}function search_filter(a,b,c){updateContainer(c,a,b);return false}function getRadioButton(h,g,j,f,e,b){var c=document.getElementsByName(h);if(c!=undefined){for(var d=0;d<c.length;d++){if(c[d].checked==true){if(c[d].alt==""){closeDhtmlWindow(g);return false}else{if(confirm(c[d].alt)){var a=ajaxPostform("",f,e,false);if(a==ajaxSuccess){parent.closeDhtmlWindow(g);parent.refresh_menutree();parent.ajaxGetpage("page_content",b,true);return true}}}}}}}function del_listitem(a,e,c,b){if(confirm(c)){if(e=="page_content"){ajaxGetpage(e,a,false)}else{var d=ajaxPostform("",a,b,false);updateWindow(d,b,"",e)}}return false}function compare_histoty(a,b,c){updateWindow(a,b,"",c);return false}function histoty_version(b,c,e,f,d,a,h){var g=ajaxPostform("",b,e,false);if(g!=false){newDhtmlWindow(c+g,f,d,a,h)}return false}function change_button(d,e,f,h,c,a){if(f==undefined||f==""){f=""}var g="<img src='"+e+"' title='"+f+"' border='0' />";if(a==undefined){a="page_content"}if(h!==undefined&&h!==""&&h!==null){var i='ajaxPostform("'+a+'", "'+h+'", "'+c+'",false); return false;';g="<a href='"+h+"' onClick='"+i+" ' >"+g+"</a>"}var b=document.getElementById(d);if(b!=undefined){b.innerHTML=g}return false}function user_course(d,b,a){var c=ajaxPostform("",d,"resource_form",false);if(c==ajaxSuccess){updateWindow(b,a,"title","course_input")}return false}function course_editor(e,d,a,b,c){ajaxPostform("",e,"resource_form",false);ajaxGetpage("page_content",a,true);updateWindow(d,b,"title","course_input");return false}function update_checkbox(b,a){ajaxPostform("",b,"itstd_form",true)}function course_lnk(e,b,d,a,c){if(!isString(d)){d=""}htmlimg="<img src='"+b+"' title='"+d+"' border='0' />";if(a!=undefined&&a!=""){updateWindow(a,c,"title","course_input");htmlimg="<a href='"+a+"' onClick='"+onclick+"' >"+htmlimg+"</a>"}return false}function user_goal(f,c,b,a,e){var d=ajaxPostform("",f,a,false);if(d==ajaxSuccess){ajaxGetpage("page_content",b,true);updateWindow(c,a,"title",e)}return false}function select_unit(a,b,d,c){ajaxPostform(d,a,b,true);delayDivUpdate("massage","&nbsp;");return false}function select_item_goal(c,a,b,d){ajaxPostform(d,a+c.value,b,true);return false}function add_goal(a,f,c,b){var g=ajaxPostform("page_content",a,c,false);if(g==true){var e=document.getElementById("massage");if(e!=undefined){e.innerHTML=b}delayDivUpdate("massage","&nbsp;")}else{var e=document.getElementById("title");var d=document.getElementById("txttitle");if(e!=undefined&&d!=undefined){d.value=e.value}else{}}return false}function update_datetime(a,b){ajaxPostform("",a,b,true);return false}function delayDivUpdate(e,b,c){var d=document.getElementById(e);if(d!=undefined){if(c==undefined){var a='delayDivUpdate("'+e+'","'+b+'",true);';setTimeout(a,5000)}else{d.innerHTML="&nbsp;"}}}function totalunit_refresh(){ajaxGetpage("total_unit",appHomeUrl+"menu/menu/totalunit",true)}function find_filter(a,c,d,b){ajaxPostform(d,a,c,true);return false}function update_radio(c,b){var a;a=ajaxGetpage("",b,false);if(a!=ajaxSuccess){alert(raido_update_error_msg);if(isObject(c)&&typeof(c.checked)!=="undefined"){c.checked=false}return false}return true}function survey_done(e,b,g,d,c,f){var a="";if(!checked_all_radios(g)){alert(f);return false}a=ajaxGetpage("",e,false);if(a==ajaxSuccess){alert(d)}else{alert(c)}window.location=b;return false}function survey_result(url,width,height){ajaxPostform("page_content",url,"surveyresult",false);var index_text=ajaxGetpage("",appHomeUrl+"survey/result/chartindexes",false);var waittime=0;if(index_text.length>1){var indexes=eval(index_text);for(var i in indexes){var chartfunction='print_flashchart("'+appIncludePath+'flashchart.swf","surveychart_'+indexes[i]+'",'+width+","+height+',"'+appHomeUrl+"survey/result/chart/"+indexes[i]+'");';var chartfunction_teacher='print_flashchart("'+appIncludePath+'flashchart.swf","surveychart_'+indexes[i]+'t",'+width+","+height+',"'+appHomeUrl+"survey/result/chart/"+indexes[i]+'t");';if(waittime==0){setTimeout(chartfunction,50);setTimeout(chartfunction_teacher,1600);waittime=2600}else{waittime+=400;setTimeout(chartfunction,waittime);waittime+=400;setTimeout(chartfunction_teacher,waittime)}}}return false}function confirmDBUpgrade(c,f,d,a,g,e){var b=confirm(e);if(b){openBrowserWindow(c,d,a,g,true)}return false}function course_read(c,b){var a=appHomeUrl+"admin/course/select/"+c+"/0/"+b+"/user";new newDhtmlWindow(a," ",600,470,"course_input");return false}function course_edit(c,b){var a=appHomeUrl+"admin/course/select/"+c+"/1/"+b+"/user";new newDhtmlWindow(a," ",600,470,"course_input");return false}function get_selectbox_val(b){if(!b){return false}var a=document.getElementById(b);if(!a){return false}return a.options[a.selectedIndex].value}function set_textarea_properties(d,c){var a=document.getElementById("text1");var b=window_size_array();if(!isObject(a)||!isObject(b)){return false}if(!isNaN(d)&&d>0){window_width=b.width;max_cols=parseInt(window_width/d,10);cur_cols=a.cols;if(max_cols>5&&!isNaN(cur_cols)&&cur_cols>max_cols){a.cols=max_cols}}if(isInteger(c)){a.rows=c}return false}function admin_cleanup(b,c,a){disable_button(b);openBrowserWindow(a,500,250,"admincleanup",true);return false}function mapping_window(b,e,c,a,h,d,g){if(isArray(g)){flashchart_window(b,e,c,a,h,d,g);return false}var f=ajaxPostform("",b,d,false);if(isString(f)){newDhtmlWindow_text(e,c,a,h,f)}return false};