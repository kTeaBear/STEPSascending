tinyMCEPopup.requireLangPack();var AsciisvgDialog={width:300,height:200,alignm:"middle",sscr:"",isnew:null,AScgiloc:null,init:function(){var a=document.forms[0];this.width=tinyMCEPopup.getWindowArg("width");this.height=tinyMCEPopup.getWindowArg("height");this.isnew=tinyMCEPopup.getWindowArg("isnew");this.sscr=tinyMCEPopup.getWindowArg("sscr");this.AScgiloc=tinyMCEPopup.getWindowArg("AScgiloc");this.alignm=tinyMCEPopup.getWindowArg("alignm");if(ASnoSVG){document.getElementById("preview").innerHTML='<img id="previewimg" style="width:'+this.width+"px; height: "+this.height+'px; vertical-align: middle; float: none;" src="'+this.AScgiloc+"?sscr="+encodeURIComponent(this.sscr)+'" script=" " />'}else{document.getElementById("previewsvg").setAttribute("sscr",this.sscr)}this.getsscr(this.sscr)},insert:function(){ed=tinyMCEPopup.editor;if(this.isnew){if(this.alignm=="left"||this.alignm=="right"){aligntxt="vertical-align: middle; float: "+this.alignm+";"}else{aligntxt="vertical-align: "+this.alignm+"; float: none;"}tinyMCEPopup.editor.execCommand("mceInsertContent",false,'<img style="width:300px; height: 200px; '+aligntxt+'" src="'+this.AScgiloc+"?sscr="+encodeURIComponent(this.sscr)+'" sscr="'+this.sscr+'" script=" " />')}else{el=tinyMCEPopup.editor.selection.getNode();ed.dom.setAttrib(el,"sscr",this.sscr);ed.dom.setAttrib(el,"src",this.AScgiloc+"?sscr="+encodeURIComponent(this.sscr));ed.dom.setAttrib(el,"width",this.width);ed.dom.setAttrib(el,"height",this.height);ed.dom.setStyle(el,"width",this.width+"px");ed.dom.setStyle(el,"height",this.height+"px");if(this.alignm=="left"||this.alignm=="right"){ed.dom.setStyle(el,"float",this.alignm);ed.dom.setStyle(el,"vertical-align","middle")}else{ed.dom.setStyle(el,"float","none");ed.dom.setStyle(el,"vertical-align",this.alignm)}}tinyMCEPopup.close()},addgraph:function(){var c=document.getElementById("graphs");var b=document.createElement("option");var e=document.getElementById("eqntype").value;var d=document.getElementById("equation").value;var a=null;if(e=="func"){b.text="y="+d}else{if(e=="polar"){b.text="r="+d}else{if(e=="param"){a=document.getElementById("eqn2").value;b.text="[x,y]=["+d+","+a+"]"}else{if(e=="slope"){b.text="dy/dx="+d;a=document.getElementById("eqn2").value}}}}m_gstart=document.getElementById("gstart").selectedIndex;m_gend=document.getElementById("gend").selectedIndex;m_color=document.getElementById("gcolor").value;m_strokewidth=document.getElementById("strokewidth").value;m_strokedash=document.getElementById("strokedash").value;if(document.getElementById("xstart").value.length>0){b.value=e+","+d+","+a+","+m_gstart+","+m_gend+","+document.getElementById("xstart").value+","+document.getElementById("xend").value+","+m_color+","+m_strokewidth+","+m_strokedash}else{b.value=e+","+d+","+a+","+m_gstart+","+m_gend+",,,"+m_color+","+m_strokewidth+","+m_strokedash}c.options[c.options.length]=b;c.selectedIndex=c.options.length-1;this.graphit();document.getElementById("equation").focus()},replacegraph:function(){var a=document.getElementById("graphs");if(a.selectedIndex>=0){a.options[a.selectedIndex]=null}this.addgraph()},removegraph:function(){var a=document.getElementById("graphs");if(a.selectedIndex>=0){a.options[a.selectedIndex]=null;if(a.options.length>0){this.loadeqn()}}this.graphit();document.getElementById("equation").focus()},graphit:function(){ed=tinyMCEPopup.editor;var a;a="";initialized=false;m_xmin=document.getElementById("xmin").value;m_xmax=document.getElementById("xmax").value;m_ymin=document.getElementById("ymin").value;m_ymax=document.getElementById("ymax").value;if(m_ymin==""){m_ymin=null}if(m_ymax==""){m_ymax=null}a+=m_xmin+","+m_xmax+","+m_ymin+","+m_ymax+",";m_xscl=document.getElementById("xscl").value;m_yscl=document.getElementById("yscl").value;if(m_xscl==""){m_xscl=null}if(m_yscl==""){m_yscl=null}if(document.getElementById("labels").checked){m_labels="1"}else{m_labels="null"}if(document.getElementById("grid").checked){m_grid=","+m_xscl+","+m_yscl}else{m_grid=",null,null"}a+=m_xscl+","+m_yscl+","+m_labels+m_grid;a+=","+document.getElementById("gwidth").value+","+document.getElementById("gheight").value;graphs=document.getElementById("graphs");for(i=0;i<graphs.length;i++){a+=","+graphs.options[i].value}this.width=document.getElementById("gwidth").value;this.height=document.getElementById("gheight").value;this.sscr=a;this.alignm=document.getElementById("alignment").value;if(ASnoSVG){pvimg=document.getElementById("previewimg");pvimg.src=this.AScgiloc+"?sscr="+encodeURIComponent(a);ed.dom.setStyle(pvimg,"width",this.width+"px");ed.dom.setStyle(pvimg,"height",this.height+"px")}else{pvsvg=document.getElementById("previewsvg");parseShortScript(a,this.width,this.height)}},changetype:function(){var a=document.getElementById("eqntype").value;if(a=="func"){this.chgtext("eq1lbl","f(x)=");document.getElementById("equation").value="sin(x)";this.chgtext("eq2lbl","");this.chgtext("eq2","")}else{if(a=="polar"){this.chgtext("eq1lbl","r(t)=");document.getElementById("equation").value="t";this.chgtext("eq2lbl","");this.chgtext("eq2","")}else{if(a=="param"){this.chgtext("eq1lbl","f(t)=");this.chgtext("eq2lbl","g(t)= ");var c=document.createElement("input");c.type="text";c.name="eqn2";c.id="eqn2";c.size="15";c.value="cos(t)";var b=document.getElementById("eq2");b.replaceChild(c,b.lastChild);document.getElementById("equation").value="sin(t)"}else{if(a=="slope"){this.chgtext("eq1lbl","dy/dx (x,y) = ");document.getElementById("equation").value="x*y";this.chgtext("eq2lbl","every ");var c=document.createElement("input");c.type="text";c.name="eqn2";c.id="eqn2";c.size="2";c.value="1";var b=document.getElementById("eq2");b.replaceChild(c,b.lastChild)}}}}document.getElementById("gstart").selectedIndex=0;document.getElementById("gend").selectedIndex=0;document.getElementById("xstart").value="";document.getElementById("xend").value="";document.getElementById("gcolor").selectedIndex=0;document.getElementById("strokewidth").selectedIndex=0;document.getElementById("strokedash").selectedIndex=0},loadeqn:function(){graphs=document.getElementById("graphs");var a=graphs.options[graphs.selectedIndex].value.split(",");if(a[0]=="func"){document.getElementById("eqntype").selectedIndex=0}else{if(a[0]=="polar"){document.getElementById("eqntype").selectedIndex=1}else{if(a[0]=="param"){document.getElementById("eqntype").selectedIndex=2}else{if(a[0]=="slope"){document.getElementById("eqntype").selectedIndex=3}}}}this.changetype();document.getElementById("equation").value=a[1];if((a[0]=="param")||(a[0]=="slope")){document.getElementById("eqn2").value=a[2]}document.getElementById("gstart").selectedIndex=a[3];document.getElementById("gend").selectedIndex=a[4];document.getElementById("xstart").value=a[5];document.getElementById("xend").value=a[6];switch(a[7]){case"black":document.getElementById("gcolor").selectedIndex=0;break;case"red":document.getElementById("gcolor").selectedIndex=1;break;case"orange":document.getElementById("gcolor").selectedIndex=2;break;case"yellow":document.getElementById("gcolor").selectedIndex=3;break;case"green":document.getElementById("gcolor").selectedIndex=4;break;case"blue":document.getElementById("gcolor").selectedIndex=5;break;case"purple":document.getElementById("gcolor").selectedIndex=6;break}document.getElementById("strokewidth").selectedIndex=a[8]-1;switch(a[9]){case"2":document.getElementById("strokedash").selectedIndex=1;break;case"5":document.getElementById("strokedash").selectedIndex=2;break;case"5 2":document.getElementById("strokedash").selectedIndex=3;break;case"7 3 2 3":document.getElementById("strokedash").selectedIndex=4;break;default:document.getElementById("strokedash").selectedIndex=0}},getsscr:function(text,alignment){alignment="middle";sa=text.split(",");document.getElementById("xmin").value=sa[0];document.getElementById("xmax").value=sa[1];document.getElementById("ymin").value=sa[2];document.getElementById("ymax").value=sa[3];document.getElementById("xscl").value=sa[4];document.getElementById("yscl").value=sa[5];if(sa[6]!="null"){document.getElementById("labels").checked=true}else{document.getElementById("labels").checked=false}if(typeof eval(sa[7])=="number"){document.getElementById("grid").checked=true}else{document.getElementById("grid").checked=false}document.getElementById("gwidth").value=sa[9];document.getElementById("gheight").value=sa[10];document.getElementById("graphs").length=0;var inx=11;while(sa.length>inx+9){var newopt=document.createElement("option");if(sa[inx]=="func"){newopt.text="y="+sa[inx+1]}else{if(sa[inx]=="polar"){newopt.text="r="+sa[inx+1]}else{if(sa[inx]=="param"){newopt.text="[x,y]=["+sa[inx+1]+","+sa[inx+2]+"]"}else{if(sa[inx]=="slope"){newopt.text="dy/dx="+sa[inx+1]}}}}newopt.value=sa[inx]+","+sa[inx+1]+","+sa[inx+2]+","+sa[inx+3]+","+sa[inx+4]+","+sa[inx+5]+","+sa[inx+6]+","+sa[inx+7]+","+sa[inx+8]+","+sa[inx+9];graphs=document.getElementById("graphs");graphs.options[graphs.options.length]=newopt;inx+=10}if(inx>11){this.loadeqn()}switch(alignment.toLowerCase()){case"text-top":document.getElementById("alignment").selectedIndex=0;break;case"middle":document.getElementById("alignment").selectedIndex=1;break;case"text-bottom":document.getElementById("alignment").selectedIndex=2;break;case"left":document.getElementById("alignment").selectedIndex=3;break;case"right":document.getElementById("alignment").selectedIndex=4;break;default:document.getElementById("alignment").selectedIndex=0;break}},chgtext:function(a,c){var b=document.getElementById(a);b.replaceChild(document.createTextNode(c),b.lastChild)}};tinyMCEPopup.onInit.add(AsciisvgDialog.init,AsciisvgDialog);